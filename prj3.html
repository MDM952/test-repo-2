<!DOCTYPE html>
<html lang="en" dir="ltr">

    <head>
        <meta charset="utf-8">
        <title>Projekt III ü¶à</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <link rel="stylesheet" href="css/css_project_page.css">
        <link rel="stylesheet" href="css/cssmaster.css">
        <script src="scripts\copy mail.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
        <script src="https://kit.fontawesome.com/1c9ad4b785.js" crossorigin="anonymous"></script>

        <link rel="stylesheet" href="scripts\code highlight\styles\idea.min.css"/>
        <script src="scripts\code highlight\highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>

        <script type="text/javascript" id="MathJax-script" async
        src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
        </script>

        

      </head>
  <body>
      
    <section class="jumbotron text-center">
        <div class="container", style="padding: 40px;">
          <h2>Model przewidujƒÖcy jako≈õƒá horroru na podstawie jego tytu≈Çu 
            <br>(100% skuteczno≈õci! Niezwykle praktyczny!)</h2>
          <p class="lead text-muted">
            Niezbyt powa≈ºny projekt dotyczƒÖcy przewidywania oceny horror√≥w klasy D, na podstawie ich tytu≈Ç√≥w. 
            <br>Wizualizacja danych i model drzewkowy (random forest).
          </p>

          <div style="height: 40px;"></div>

          <div class="container">
            <div class="row justify-content-md-center">
              <div class="col col-lg-4">
                <div class="accordion" id="accordionPanelsStayOpenExample" style="width: 450px;">
                  <div class="accordion-item">
                    <h2 class="accordion-header" style="margin: auto;">
                      <button class="accordion-button" type="button" data-bs-toggle="collapse" 
                      data-bs-target="#panelsStayOpen-collapseTwelve" aria-expanded="true" aria-controls="panelsStayOpen-collapseTwelve">
                      M√≥j email ‚Ü¥
                      </button>
                    </h2>
                    <div id="panelsStayOpen-collapseTwelve" class="accordion-collapse collapse" style="margin-top: 20px; margin-bottom: 20px">
                      <div class="accordion-body" >
    <!-- The text field -->
    
                        <div style="margin: auto">
                          <div class="row g-3 align-items-center">

                            <div class="col-auto" style="margin: 0px">
                              <input type="text" 
                                      id="myInput" 
                                      class="form-control form-control-sm" 
                                      value="konrad.jarominiak0@gmail.com" disabled
                                     style="width: 250px">
                            </div>
                            <div class="col-auto" style="margin: auto; padding:auto">
                              <button type="button" class="btn btn-outline-secondary btn-sm" onclick="myFunction()">skopiuj do schowka</button>
                            </div>
                          </div>
                        </div>
    
    
    
    
    <!-- The button used to copy the text -->
    
    
    <!-- The toast -->
                          <div aria-live="polite" aria-atomic="true" style="position: relative; min-height: 0px;">
                            <div class="toast" style="position: absolute; top: 0px; right: 0; width:250px">
                              <div class="toast-body">
                                Skopiowano do schowka!
                              </div>
                            </div>
                          </div>
                          
                      </div>
                    </div>
                  </div>
      
                </div>   
              </div>

              <div class="col col-lg-4">
                

                <div style="width: 450px; padding-top: 15px; padding-bottom: 15px;">
                  <a
                  href="index.html"
                  class="btn btn-secondary my-2"
                  >Powr√≥t</a>
                </div>

              </div>
            </div>
          </div>


          <div class="true_center">
            <div class="row" style="margin:margin-top: 40px; width: 100%">
              <div class="col col-sm">
             </div>
              <div class="col col-sm">

              </div>
            </div>
          </div>





          

        </div>
    </section>

    <span class="border border-0">

    <div style="height: 30px;"></div>

    <div class="container">
      <div class="row">
        <div class="col-md-9"> <!--TU ZWIJAƒÜ-->

          <div class="tresc wstep">
            <h4 id="wstep-header">1. Wstƒôp</h4>
            Pomys≈Ç na ten projekt zrodzi≈Ç siƒô z przemy≈õle≈Ñ nad zatrzƒôsieniem niezaprzeczalnie fatalnych, tanich film√≥w na serwisach VOD, 
            kt√≥rych jedynym celem jest <a href="https://www.giantfreakinrobot.com/ent/watchbait-new-clickbait.html">przyciƒÖgniƒôcie</a> 
            widza swoim tytu≈Çem nawiƒÖzujƒÖcym do starych, s≈Çynnych film√≥w. 
            Na przyk≈Çad multum film√≥w o rekinach udajƒÖcych sequele "Szczƒôk" Spielberg'a.
            <br> <br>  
            Czy mo≈ºna przewidzieƒá powodzenie takiego filmu na podstawie jego tytu≈Çu? 
            Ten projekt jest nieporadnƒÖ pr√≥bƒÖ utworzenia modelu, kt√≥ry przewiduje oceny horror√≥w i ich podr√≥bek na podstawie ich tytu≈Ç√≥w.
            <br><br>
            Projekt opiera siƒô na zestawie danych z <a href="https://www.kaggle.com/datasets/rounakbanik/the-movies-dataset?select=movies_metadata.csv">Kaggle</a>,
            kt√≥ry, wed≈Çug opisu, jest po≈ÇƒÖczeniem danych z <a href="https://www.kaggle.com/datasets/rounakbanik/the-movies-dataset?select=movies_metadata.csv">TMDB</a> i 
            <a href="https://grouplens.org/datasets/movielens/">MovieLens</a>.
            <br>
            Do wykonania niniejszego projektu wykorzystano biblioteki:
            <div style="height: 3px;"></div>

            <ul>
            <li>Pandas i Numpy do przetworzenia i oczyszczenia danych</li>
            <li>Matplotlib i Seaborn do wizualizacji danych</li>
            <li>sci-kit learn do stworzenia modeli</li>
            </ul>

          </div>

          <div class="tresc analiza_zestawu_danych">
            <h4 id="analiza_zestawu_danych-header">2. Analiza zestawu danych</h4>

            W tabeli znajdujƒÖ siƒô a≈º 24 kolumny dotyczƒÖce danych poszczeg√≥lnych film√≥w, np. tytu≈Ç, tagline, popularno≈õƒá, przych√≥d, opis, etc.
            Na potrzeby modelu, kolumny kt√≥re by≈Çyby przydatne to:

            <ul>
            <li>tytu≈Ç</li> 
            <li>gatunek</li>
            <li>bud≈ºet</li>
            <li>przych√≥d</li>
            <li>ocena</li>
            </ul>

            W pierwszej kolejno≈õci spisano listƒô cz≈Çon√≥w tytu≈Ç√≥w. Cze≈õƒá z nich mo≈ºe wyglƒÖdaƒá do≈õƒá dziwnie, np. 'Dea'.
            Taki cz≈Çon ma wy≈Çapaƒá tytu≈Çy zawierajƒÖce zar√≥wno 'Death' jak i 'Dead' i zostaƒá po≈ÇƒÖczone w tytu≈Ç jak np.
            'shark' w <a href="https://www.imdb.com/title/tt2724064/">Sharknado</a>. 
            <br><br>
            Lista cz≈Çon√≥w przedstawia siƒô nastƒôpujƒÖco:
            <pre><code>
['Evil', 'Final', 'Night', 'Kill', 'Scar', 'Scream', 'Land', 'Nado', 'Wolf', 'Dea', 
'Moon', 'Chainsaw', 'American', 'Witch', 'Cannibal', 'Monster', 'Child', 'Haunt', 
'Fear', 'Clown', 'Curs', 'Blac', 'Devil', '3D', 'Asylum', 'Conjur', 'Ouija', 'Shark', 
'Ville', 'Town', 'Texas', 'Mummy', 'Corn', 'Exorc', 'Psycho', 'Dino', 'Virus', 'House', 
'Vengeance', 'Blood', 'Nurse', 'Demon', 'Zombie', 'Cula', 'Stein', 'Geist']
            </code></pre>


            <br>
            Nastƒôpnie utworzono funkcjƒô agregujƒÖcƒÖ tytu≈Çy do sprawdzenia ilo≈õci film√≥w z danymi cz≈Çonami.

            <pre><code>
shape_amount = {}

def check_amount(part_to_check):

    # czƒô≈õƒá weryfikujƒÖca
    print(f'Title part: "{part_to_check}"')
    print(f'Amount: {df[df["original_title"].str.contains(part_to_check, case=False)].shape[0]}')
    print(f'Avg score: {df[df["original_title"].str.contains(part_to_check, case=False)]["vote_average"].mean().round(2)}')

    # czƒô≈õƒá agregujƒÖca
    shape_amount[part_to_check] = df[df["original_title"].str.contains(part_to_check, case=False)].shape[0]
    

check_amount(random.sample(title_parts, 1)[0]) # sprawdzamy losowy cz≈Çon

# out:
Title part: "Moon"
Amount: 16
Avg score: 4.25
            </code></pre>

            Na podstawie danych zagregowanych do s≈Çownika utworzono dataframe i wykres kolumnowy z ilo≈õciƒÖ tytu≈Ç√≥w zawierajƒÖcƒÖ dany cz≈Çon. 
            <br> Wykres ten zawiera 1425 cz≈Çon√≥w, z czego 208 to duplikaty, co oznacza, 
            ≈ºe 17% tytu≈Ç√≥w jest przynajmniej dwucz≈Çonowa.

            <div class="accordion" id="accordionPanelsStayOpenExample">
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button" type="button" data-bs-toggle="collapse" 
                  data-bs-target="#panelsStayOpen-collapseNine" aria-expanded="true" aria-controls="panelsStayOpen-collapseNine", style="padding: auto;">
                    <img src="css\p3_images\title parts amount.png" style="max-width: 100%; margin: auto;">                
                  </button> 
                </h2>
                <div id="panelsStayOpen-collapseNine" class="accordion-collapse collapse">
                  <div class="accordion-body">
  <pre><code>
sf = pd.DataFrame.from_dict(shape_amount, orient='index', columns=['amount'])
sf = sf.sort_values('amount', ascending=False)

fig, ax = plt.subplots(figsize=(9,6))
plt.xticks(rotation=90)
chart = sns.barplot(data=sf, x=sf.index, y='amount', palette='plasma')
chart.set_title('Rozk≈Çad czƒô≈õci tytu≈Ç√≥w')
chart.set(xlabel='Czƒô≈õƒá tytu≈Çu', ylabel='Ilo≈õƒá')
  </code></pre>                </div>
                </div>
              </div>
            </div>

            <br>
            Kolejno przefiltrowano zestaw danych tak, aby pozosta≈Çy tylko te horrory, kt√≥re zawierajƒÖ przynajmniej jeden cz≈Çon z naszej listy.
            Sprawdzono r√≥wnie≈º jaka ilo≈õƒá film√≥w zawiera dane dotyczƒÖce bud≈ºetu i przychodu. 
            Niestety znaczna wiƒôkszo≈õƒá z nich nie ma tych warto≈õci sprecyzowanych i ostatecznie kolumny 'budget' i 'revenue' zosta≈Çy usuniƒôte przed modelowaniem.
            Tak du≈ºe ilo≈õci brakujƒÖcych danych bardzo negatywnie wp≈Çynƒô≈Çy by na jako≈õƒá modelu. 
            <br> <br>



            <pre><code> <!-- Kod dla pokole≈Ñ i dystansu -->
watchbait_df = pd.DataFrame()

for i in title_parts:
    current_part = df[df["original_title"].str.contains(i, case=False)]
    print(f'"{i}" in titles: {current_part.shape[0]}; Average score: {current_part["vote_average"].mean().round(1)}')
    watchbait_df = pd.concat([watchbait_df, current_part], ignore_index=True)

# out:
"Zombie" in titles: 47; Average score: 4.5

print(f'Budget over 0: {watchbait_df[watchbait_df["budget"] > 0].shape[0]}')
print(f'Revenue over 0: {watchbait_df[watchbait_df["revenue"] > 0].shape[0]}')
print(f'Total amount of titles: {watchbait_df.shape[0]}')

# out:
Budget over 0: 419
Revenue over 0: 251
Total amount of titles: 1425
            </code></pre>

            Usuniƒôto r√≥wnie≈º filmy z ilo≈õciƒÖ ocen 0, 1 i 2. 
            Filmy z ilo≈õciƒÖ ocen r√≥wnƒÖ 3 mia≈Çy wystarczajƒÖco sensowne wyniki tzn. oceny by≈Çy niewiƒôksze ni≈º 7. 
            Gdyby ko≈Ñcowy rozmiar zestawu danych nie by≈Ç ma≈Çy (115 tytu≈Ç√≥w), odciƒôcie po ilo≈õci ocen oczywi≈õcie by zwiƒôkszono.
            Kolejno przeprowadzono nastƒôpujƒÖce operacje:

            <li>Usuniƒôto duplikaty</li>
            <li>Ograniczono tabelƒô do tytu≈Çu, oceny i ilo≈õci ocen</li>
            <li>Przeprowadzon one-hot encoding cz≈Çon√≥w tytu≈Ç√≥w</li>
            <li>Utworzono uproszczonƒÖ kolumnƒô ocen - 'Rating' z trzema mo≈ºliwymi stopniami: 'Good', 'Decent', 'Awful'. Te warto≈õci bƒôdzie przewidywa≈Ç model. 
              Przedzia≈Çy wyznaczono na podstawie ko≈Ñcowego histogramu ocen, zamieszczonego poni≈ºej.</li>
            <li>Ograniczono tytu≈Çy tylko do tych, kt√≥re majƒÖ przynajmniej dwucz≈Çonowe tytu≈Çy - tu ilo≈õƒá film√≥w spad≈Ça do 115. </li>
            <br>
            <div class="accordion" id="accordionPanelsStayOpenExample">
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button class="accordion-button" type="button" data-bs-toggle="collapse" 
                  data-bs-target="#panelsStayOpen-collapseCode" aria-expanded="true" aria-controls="panelsStayOpen-collapseCode">
  Kod dla procedur powy≈ºej
                  </button>
                </h2>
                <div id="panelsStayOpen-collapseCode" class="accordion-collapse collapse">
                  <div class="accordion-body">
                    <pre><code>
# usuniƒôcie duplikat√≥w
print(f'Before duplicate removal: {df.shape[0]}')
df = df.drop_duplicates()
print(f'After duplicate removal: {df.shape[0]}\n')

# out:
Before duplicate removal: 1425
After duplicate removal: 1218


# ograniczenie df do istotnych kolumn
df = df[['title', 'vote_average', 'vote_count']]


# one-hot encoding cz≈Çon√≥w
def get_part(title, part):
    if part.lower() in title.lower():
        return 1
    else:
        return 0

for title_part in title_parts:
    df[title_part] = df['title'].apply(lambda x: get_part(x, title_part))


# uproszczona ocena
def uniform_score(vote):
    if vote >= 7:
        return 'Great'
    elif vote >= 5 and vote < 7:
        return 'Decent'
    elif vote >=3 and vote < 5:
        return 'Bad'
    elif vote < 3:
        return 'Awful'

df['Rating'] = df["vote_average"].apply(lambda x: uniform_score(x))


# uciƒôcie do min. dwucz≈Çonowych film√≥w, to p√≥jdzie do modelowania
df_cut = df[df["Title parts"] > 1]
                                  </code></pre>
                  </div>
                </div>
              </div>
  
            </div>
<br>
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                  data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false"
                  aria-controls="panelsStayOpen-collapseThree">
                  <img src="css\p3_images\histogram ocen.png" class="acc-image" alt="">
                </button>
              </h2>
              <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse">
                <div class="accordion-body">
                  <pre><code class="language-python">
scores = df.iloc[:, 7:21]
scores['satisfaction_v2'] = df['satisfaction_v2']

scores_melted = pd.melt(scores, id_vars=['satisfaction_v2'], var_name='score')
scores_melted['score'] = scores_melted['score'].map(service_dict)

plt.figure(figsize=(8,4))
plt.xticks(rotation=-90)
ax = sns.barplot(x='score', 
            y='value', 
            order=scores_melted.groupby('score').mean().sort_values('value').reindex().index.tolist(),
            hue='satisfaction_v2',
            data=scores_melted,
            palette={
                'satisfied':'#325288',
                'neutral or dissatisfied':'#FF5959'
            },
            errorbar=None)

plt.legend(loc='lower left',
           framealpha=0.9,
           title='Klienci:',
           labels=['Usatysfakcjonowani', 'Nieusatysfakcjonowani lub\nneutralni'])

ax.set(ylabel='Ocena', xlabel='',)
ax.set_title('Ocena us≈Çug w zale≈ºno≈õci od og√≥lnej satysfakcji', fontdict={'size': 11})

for patch in ax.patches:
    patch.set_edgecolor('black')
                        patch.set_linewidth(0.6)
                  </code></pre>
                </div>
              </div>
            </div>

          </div>
            <div class="tresc analiza_zestawu_danych">
              <h4 id="wizualizacja-header">3. Sprawdzenie korelacji</h4>


              

              <br>
              Przed rozpoczƒôciem modelowania sprawdzono, 
              czy w zestawie danych istnieje zale≈ºno≈õƒá miƒôdzy samymi cz≈Çonami tytu≈Ç√≥w a ocenƒÖ film√≥w.
              Dokonano tego zestawiajƒÖc korelacjƒô cz≈Çon√≥w do oceny (s≈Çupki) wraz samƒÖ ≈õredniƒÖ ocenƒÖ dla danego cz≈Çonu (linia).
              
              <br>
              
          <div class="accordion" id="accordionPanelsStayOpenExample">
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" 
                data-bs-target="#panelsStayOpen-collapseFivee" aria-expanded="true" aria-controls="panelsStayOpen-collapseFivee">
<img src="css\p3_images\titlepart and corr.png" style="width: 100%;" alt="">
                </button>
              </h2>
              <div id="panelsStayOpen-collapseFivee" class="accordion-collapse collapse">
                <div class="accordion-body">
                  <pre><code class="language-python">
# kolumna cz≈Çonu do oceny
corr_matrix = df_cut.corr()['vote_average'][1:]

# dodanie kolumny ocen do df, do naniesienia na wykresie jako liniƒô
dfc_cut = pd.concat([corr_matrix, pd.Series(avg_title_dict)], axis=1)
dfc_cut.columns = ['correlation', 'vote_average']

# poprawka i usuniƒôcie cz≈Çon√≥w bez korelacji
dfc_cut = dfc_cut.reset_index()
dfc_cut.columns = ['title', 'correlation', 'vote_average']
dfc_cut.dropna(inplace=True)

# wykres
fig, ax = plt.subplots(figsize=(10,7))
plt.xticks(rotation=90)
plt.rcParams['font.size'] = 8

# naniesienie korelacji jako s≈Çupki z sortowaniem po korelacji
ax = sns.barplot(data=dfc_cut.sort_values(by='correlation'), x='title', y='correlation', palette='magma')
ax.set_ylim(-0.35, 0.35)
ax.set_ylabel('Korelacja (s≈Çupki)', fontdict={'fontsize':9})

# naniesienie ocen jako linii z sortowaniem po korelacji
ax2 = ax.twinx()
sns.lineplot(data=dfc_cut.sort_values(by='correlation'), x='title', y='vote_average', ax=ax2, marker='.', color='royalblue')
ax2.set_ylabel('Vote Average', fontdict={'fontsize':10})
ax2.set_ylabel('≈örednia ocena (linia)')

# formatowanie
ax.set_xlabel('Cz≈Çon tytu≈Çu', fontdict={'fontsize':'10'})
plt.title('Korelacja i ≈õrednia ocena cz≈Çon√≥w tytu≈Ç√≥w', fontdict={'fontsize':11})
                    </code></pre>
                </div>
              </div>
            </div>
          </div>
          <li class="opis_wiz">
            Korelacje sƒÖ niskie, czego mo≈ºna siƒô by≈Ço spodziewaƒá. Na szczƒô≈õcie celem tego modelu jest dowcip, nie trafno≈õƒá czy s≈Çuszno≈õƒá.
          </li>

          <li class="opis_wiz">
            W niekt√≥rych cz≈Çonach wystƒôpuje dziwny stosunek korelacji do oceny, 
            w szczeg√≥lno≈õci "Shark" - cz≈Çon ten ma najni≈ºszƒÖ ≈õredniƒÖ ocenƒô film√≥w, jednak jego korelacja jest bliska 0.
            Byƒá mo≈ºe wynika to z wystƒôpowania innych cz≈Çon√≥w wraz z cz≈Çonem "Shark".

          </li>
          <li class="opis_wiz">
            Najgorszym cz≈Çonem okaza≈Ço siƒô "Zombie", co ma sens, ze wzglƒôdu na czƒôsto≈õƒá tego cz≈Çonu, og√≥lnƒÖ sztampowo≈õƒá film√≥w o zombie i ich niskƒÖ ocenƒô. 
            Tu zn√≥w pojawia siƒô problem braku r√≥wnowagi w ilo≈õci poszczeg√≥lnych atrybut√≥w i wp≈Çywu na korelacjƒô, jak w przypadku pokole≈Ñ w projekcie ocen us≈Çug lotniczych.
            Aby warto≈õci korelacji najlepiej oddawa≈Çy te zale≈ºno≈õci, istotne jest aby dane atrybuty by≈Çy w miarƒô r√≥wno reprezentowane.
          </li>

          <br>

          <div class="accordion" id="accordionPanelsStayOpenExample">
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" 
                data-bs-target="#panelsStayOpen-collapseSeven" aria-expanded="true" aria-controls="panelsStayOpen-collapseSeven">
<img src="css\p2_images\Histogram odleg≈Ço≈õci.png" style="max-width:100%; max-height: 100%; margin: auto;" alt="">                </button>
              </h2>
              <div id="panelsStayOpen-collapseSeven" class="accordion-collapse collapse">
                <div class="accordion-body">

                  <pre><code>
plt.figure(figsize=(8,4))
ax = sns.histplot(data=df['Flight Distance'], binwidth=200, color='#D80032')

ax.set_title('Histogram odleg≈Ço≈õci', fontdict={'fontsize':11})
ax.set_xlabel('Odleg≈Ço≈õƒá [mi]')
ax.set_ylabel('Czƒôsto≈õƒá')
                  </code></pre>

                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" 
                data-bs-target="#panelsStayOpen-collapseEight" aria-expanded="false" aria-controls="panelsStayOpen-collapseEight">
<img src="css\p2_images\Histogram op√≥≈∫nie≈Ñ.png" style="width:100%" alt="">
                </button>
              </h2>
              <div id="panelsStayOpen-collapseEight" class="accordion-collapse collapse">
                <div class="accordion-body">

                  <pre><code>
# kod tylko dla prawego wykresu
plt.figure(figsize=(4,4))
ax = sns.histplot(data=df['Arrival Delay in Minutes'], bins=30, color='#F78CA2')
ax.set_title('Histogram op√≥≈∫nie≈Ñ', fontdict={'fontsize':11})
ax.set_xlabel('Op√≥≈∫nienie przylotu [min]')
ax.set_ylabel('Czƒôsto≈õƒá')
                  </code></pre>

                </div>
              </div>
            </div>
          </div>
          <li class="opis_wiz">
            Wyra≈∫ny spadek w ilo≈õci odleg≈Ço≈õci powy≈ºej 4000 mil przyjƒôto za granicƒô 
            miƒôdzy kr√≥tkim/d≈Çugim lotem przy tworzeniu kolumny 'simple distance' majƒÖcej upro≈õciƒá i polepszyƒá wydajno≈õƒá przewidujƒÖcego modelu.
          </li>
          <li class="opis_wiz">
            Op√≥≈∫nienia w odlocie i przylocie sƒÖ bardzo podobne, jednak nie sƒÖ identyczne. Niemniej, jednƒÖ z tych kolumn usuniƒôto r√≥wnie≈º w celu usprawnienia modelu.
          </li>
<br>
          
          <div class="accordion" id="accordionPanelsStayOpenExample"> 
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button" type="button" data-bs-toggle="collapse"
                  data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
                  <img src="css\p2_images\Us≈Çugi a p≈Çeƒá.png" class="acc-image" alt="">
                </button>
              </h2>
              <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse">
                <div class="accordion-body">
                  <pre><code class="language-python">
scores = df.iloc[:, 7:21]
scores['Gender'] = df['Gender']

scores_melted = pd.melt(scores, id_vars=['Gender'], var_name='score')
scores_melted['score'] = scores_melted['score'].map(service_dict)


plt.figure(figsize=(8,4))
plt.xticks(rotation=-90)
ax = sns.barplot(x='score', 
            y='value', 
            order=scores_melted.groupby('score').mean().sort_values('value').reindex().index.tolist(),
            hue='Gender',
            data=scores_melted,
            palette={
                'Female':'#00ffbf',
                'Male' : '#ffbb33'
            },
            errorbar=None)

plt.legend(loc='lower left', labels=['Kobiety', 'Mƒô≈ºczy≈∫ni'])

ax.set(ylabel='Ocena', xlabel='',)
ax.set_title('Ocena us≈Çug w zale≈ºno≈õci od p≈Çci', fontdict={'size': 11})

for patch in ax.patches:
    patch.set_edgecolor('black')
    patch.set_linewidth(0.6)
                                                </code></pre>
                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                  data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwo">
                  <img src="css\p2_images\Us≈Çugi a pokolenia.png" class="acc-image" alt="">
                </button>
              </h2>
              <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse">
                <div class="accordion-body">
                  <pre><code class="language-python">
scores = df.iloc[:, 7:21]
scores['Generation'] = df['Generation']

scores_melted = pd.melt(scores, id_vars=['Generation'], var_name='score')
scores_melted['score'] = scores_melted['score'].map(service_dict)

hue_order = ['Silent Generation', 'Boomer', 'GenX', 'Millenial', 'Zoomer']

plt.figure(figsize=(8,4))
plt.xticks(rotation=-90)
ax = sns.barplot(x='score', 
y='value', 
order=scores_melted.groupby('score').mean().sort_values('value').reindex().index.tolist(),
hue='Generation',
hue_order=hue_order,
data=scores_melted,
palette='rocket',
errorbar=None)

plt.legend(loc='lower left', )

ax.set(ylabel='Ocena', xlabel='',)
ax.set_title('Ocena us≈Çug w zale≈ºno≈õci od pokolenia', fontdict={'size': 11})

for patch in ax.patches:
patch.set_edgecolor('#191717')
patch.set_linewidth(0.4)
                                                </code></pre>
                </div>
              </div>
            </div>

            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                  data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false"
                  aria-controls="panelsStayOpen-collapseThree">
                  <img src="css\p2_images\Us≈Çugi a lojalno≈õƒá.png" class="acc-image" alt="">
                </button>
              </h2>
              <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse">
                <div class="accordion-body">
                  <pre><code class="language-python">
scores = df.iloc[:, 7:21]
scores['Customer Type'] = df['Customer Type']

scores_melted = pd.melt(scores, id_vars=['Customer Type'], var_name='score')
scores_melted['score'] = scores_melted['score'].map(service_dict)

plt.figure(figsize=(8,4))
plt.xticks(rotation=-90)
ax = sns.barplot(x='score', 
            y='value', 
            order=scores_melted.groupby('score').mean().sort_values('value').reindex().index.tolist(),
            hue='Customer Type',
            data=scores_melted,
            palette={
                'Loyal Customer':'#B85C38',
                'disloyal Customer':'#2D2424'
            },
            errorbar=None)

plt.legend(loc='lower left',
           framealpha=0.9,
           title='Klienci:',
           labels=['Lojalni', 'Nielojalni'])

ax.set(ylabel='Ocena', xlabel='',)
ax.set_title('Ocena us≈Çug w zale≈ºno≈õci od lojalno≈õci', fontdict={'size': 11})

for patch in ax.patches:
    patch.set_edgecolor('#080202')
    patch.set_linewidth(0.6)
                  </code></pre>
                </div>
              </div>
            </div>
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                  data-bs-target="#panelsStayOpen-collapseFour" aria-expanded="false"
                  aria-controls="panelsStayOpen-collapseFour">
                  <img src="css\p2_images\Us≈Çugi a klasa.png" class="acc-image" alt="">
                </button>
              </h2>
              <div id="panelsStayOpen-collapseFour" class="accordion-collapse collapse">
                <div class="accordion-body">
                  <pre><code class="language-python">
scores = df.iloc[:, 7:21]
scores['Class'] = df['Class']

scores_melted = pd.melt(scores, id_vars=['Class'], var_name='score')
scores_melted['score'] = scores_melted['score'].map(service_dict)

hue_order = ['Eco', 'Eco Plus', 'Business']

plt.figure(figsize=(8,4))
plt.xticks(rotation=-90)
ax = sns.barplot(x='score', 
            y='value', 
            order=scores_melted.groupby('score').mean().sort_values('value').reindex().index.tolist(),
            hue='Class',
            hue_order=hue_order,
            data=scores_melted,
            palette='mako_r',
            errorbar=None)

plt.legend(loc='lower left',
           framealpha=0.9,
           title='Klasa:',)

ax.set(ylabel='Ocena', xlabel='',)
ax.set_title('Ocena us≈Çug w zale≈ºno≈õci od klasy', fontdict={'size': 11})

for patch in ax.patches:
    patch.set_edgecolor('#080202')
    patch.set_linewidth(0.6)
                  </code></pre>
                </div>
              </div>
            </div>

            <div class="opis_wiz"></div>
            <li>
              Jedyna us≈Çuga wy≈ºej oceniona przez mƒô≈ºczyzn ni≈º przez kobiety to dogodno≈õƒá czasowa wylotu / odlotu. 
              TƒÖ us≈Çugƒô najwy≈ºej ocenili klienci z pokolenia Z, kt√≥rzy og√≥lnie do≈õƒá nisko oceniali wiƒôkszo≈õƒá us≈Çug.
              Rozk≈Çad ocen miƒôdzy pokoleniami i p≈Çciami nie jest a≈º tak znaczƒÖcy. Wiƒôksze r√≥≈ºnice widoczne sƒÖ w kolejnych kategoriach.
            </li>
            <li>
              Zale≈ºno≈õƒá ocen w kontek≈õcie og√≥lnej satysfakcji jest do≈õƒá logiczna, usatysfakcjonowani klienci w wiƒôkszo≈õci dawali du≈ºo wy≈∫sze oceny.
              Co ciekawe lokalizacja bramek i dogodno≈õƒá czasowa wylotu / odlotu zosta≈Ça wy≈ºej oceniona przez nieusatysfakcjonowanych i neutralnych klient√≥w.
              Najgorzej ocenieone przez nich us≈Çugi to wygoda siedze≈Ñ (jak wiƒôkszo≈õƒá klient√≥w) i jako≈õƒá rozrywki, 
              kt√≥ra z kolei zosta≈Ça najwy≈ºej oceniana przez usatsfakcjonowanych klient√≥w.
            </li>
            <li>
              Znaczenie jako≈õci rozrywki r√≥wnie≈º zdaje siƒô byƒá najistotniejsze pod wzglƒôdem lojalno≈õci klient√≥w. 
              Nielojalni klienci najgorzej ocenili rozrwykƒô, widoczna te≈º jest tu najwiƒôksza r√≥≈ºnica ocen miƒôdzy klientami lojalnymi a nielojalnymi.
            </li>
            <li>
              Okaza≈Ço siƒô te≈º ≈ºe, klienci z klasƒÖ biznesowƒÖ sƒÖ bardziej zadowoleni z zapewnionych us≈Çug. 
              Warto zaznaczyƒá, ≈ºe ci klienci ocenili lokalizacjƒô i dogodno≈õƒá czasowƒÖ odlotu i przylotu ni≈ºej ni≈º pozostali klienci. 
              Dogodno≈õƒá czasowa powinna byƒá niezale≈ºne od klasy, czyli jest to co≈õ czego pieniƒÖdze nie kupiƒÖ i najwyra≈∫niej zwiƒÖzane z tym niedogodnienia bolƒÖ bardziej. 

              Jest to r√≥wnie≈º widoczne w por√≥wnaniu typu podr√≥≈ºy (nieprzedstawiona na wykresach), 
              gdzie klienci podr√≥≈ºujƒÖcy osobi≈õcie ocenili tƒô 'us≈Çugƒô' ≈õrednio o ponad 0,5 punkta wy≈ºej ni≈º podr√≥≈ºujƒÖcy biznesowo.

              Oczywi≈õcie, wygoda siedze≈Ñ r√≥wnie≈º zosta≈Ça najni≈ºej oceniona przez klient√≥w z klasy biznesowej. 
            </li>
          </div>

<br>




          <br>
          <div class="wiz_uwagi">
            <h6 id="uwagi-header">Uwagi dotyczƒÖce korelacji</h6>
            <li>
              Na podstawie wykresu korelacji mo≈ºna wywnioskowaƒá, ≈ºe jako≈õƒá rozrywki jest najbardziej istotnym czynnikiem wp≈ÇywajƒÖcym na dyssatysfakcjƒô klienta, 
              a pozosta≈Çe us≈Çugi nie majƒÖ a≈º tak du≈ºego znaczenia.

            </li>
            <li>
              Z kolei w przypadku usatsfakcjonowanych klient√≥w, wiƒôkszo≈õƒá ocen wysoko ze sobƒÖ koreluje. Mo≈ºna wnioskowaƒá, ≈ºe je≈õli klient jest zadowolony, oceni on wysoko ka≈ºdƒÖ z nich, 
              w przeciwie≈Ñstwie do klient√≥w nieusatysfakcjonowanych, kt√≥rzy np. nisko oceniƒÖ tylko jednƒÖ us≈Çugƒô, a resztƒô bardziej neutralnie (mo≈ºe to lepiej napisaƒá.).
            </li>
            <li>
              Spo≈õr√≥d us≈Çug, dogodno≈õƒá czasowa odlotu / przylotu i lokalizacja bramek ma ma≈Çe znaczenie dla nieusatysfakcjonowanych klient√≥w. 
              SƒÖ to dwie us≈Çugi wy≈ºej przez nich oceniane ni≈º klienci usatysfakcjonowani.
            </li>
            <li>
              Dystans lotu ma zerowe korelacje z ocenƒÖ us≈Çug, poza, co prawda do≈õƒá niskim, wynikiem korelacji -0,1 dla wygody siedze≈Ñ. 
              Osobi≈õcie spodziewa≈Çem siƒô, ≈ºe bƒôdzie on nieco bardziej znaczƒÖcy, niemniej to logiczne, ≈ºe wraz z d≈Çu≈ºszym lotem, niewygodne siedzenie daje siƒô we znaki.
            </li>
            <li>
              Zauwa≈ºalna jest pewna anomalia przy korelacji wieku z pokoleniam -  
              najwy≈ºsza korelacja wieku zaznacza siƒô dla pokolenia Baby Boomers, a nie starszej Silent Generation. 
              Mo≈ºna to wyt≈Çumaczyƒá znacznie ni≈ºszƒÖ ilo≈õciƒÖ klient√≥w z Silent Generation - niezbyt normalnƒÖ dystrybucjƒÖ wieku.
              Anomalia ta te≈º podkre≈õla problematykƒô one hot encoding-u, czyli tworzeniem nowych kolumn warto≈õciami 0-1 reprezentujƒÖcymi obecno≈õƒá pojedynczego atrybutu. 
            </li>
          </div>
          
          </div>

          <div class="tresc modelowanie">
            <h4 id="modelowanie-header">Modelowanie</h4>
            Do modelowania wykorzystano tzw. las losowy (ang. random forest), czyli ≈õwietnƒÖ metodƒô klasyfikacyjnƒÖ. 
            Metoda lasu losowego opiera siƒô na wykorzystywaniu wielu drzewek decyzyjnych, 
            gdzie ka≈ºdy z nich otrzymuje inny, losowo wybrany podzbi√≥r danych uczƒÖcych.
            <br><br>
            <h6>Dzia≈Çanie drzewek decyzyjnych</h6>
            


            Regresja logistyczna polega na funkcji sigmoidalnej, wykorzystujƒÖcej regresjƒô liniowƒÖ, w taki spos√≥b, ≈ºe warto≈õci mieszczƒÖ siƒô w zakresie od 0 do 1.
            Warto≈õci te zwykle dzieli siƒô na te powy≈ºej i poni≈ºej warto≈õci 0,5 (pr√≥g ten mo≈ºna zmieniƒá), klasyfikujƒÖc je do odpowiedniej kategorii. 
            
            Regresja liniowa polega na znalezieniu zale≈ºno≈õci miƒôdzy warto≈õciƒÖ przewidywanƒÖ (zmienna obja≈õniana)
            a predyktorami (zmienne obja≈õniajƒÖce) poprzez dopasowanie wag predyktor√≥w. 
            R√≥wnania regresji logistycznej i liniowej przedstawia siƒô nastƒôpujƒÖco: 

            $$y = Œ≤_0 + Œ≤_1 x_1 + Œ≤_2 x_2 + \dots + Œ≤_n x_n + \epsilon$$

            gdzie: 
            <li>\(y\) to zmienna obja≈õniana, zale≈ºna, to co model przewiduje</li>
            <li>\(x_i\) to zmienna obja≈õniajƒÖca, niezale≈ºna, inaczej predyktor</li>
            <li>\(Œ≤_i\) to wsp√≥≈Çczynnik regresji, element kt√≥ry dobiera model podczas trenowania </li>
            <li>\(\epsilon\) to nieskracalny b≈ÇƒÖd modelu</li>
            
            $$P = \frac{1}{1+e^{-z}}$$
            gdzie: 
            <li>\(P\) to prawdopodobie≈Ñstwo, w przedziale 0-1, im bli≈ºej progu odciƒôcia (tu 0,5) tym mniej pewna klasyfikacja</li>
            <li>\(e\) to liczba Eulera (~2,71828)</li>
            <li>\(z\) to zmienna obja≈õniajƒÖca, niezale≈ºna, tutaj \(y\), r√≥wnanie regresji liniowej</li>
 
            <br>
            <img src="css\p2_images\logreg.png" style="width: 98%; max-height: 400px; margin: auto; object-fit: contain; padding: 15px;" alt="">
            <br><br>

            <br>
            Przed modelowaniem usuniƒôto kolumnƒô Arrival Delay in Minutes, 
            poniewa≈º niemal ca≈Çkowicie pokrywa siƒô z Departure Delay in Minutes, wszystkie kolumny wykorzystane do one hot encoding-u, 
            np. 'satisfaction_v2' i zostawiajƒÖc tylko 'satisifed' z warto≈õciami 0 albo 1 oraz score_avg.
            Ponadto utworzono kolumnƒô 'simple distance', wskazujƒÖcƒÖ czy lot by≈Ç d≈Çu≈ºszy od 4250 mil, czy nie. 
            Tu r√≥wnie≈º usuniƒôto pierwotnƒÖ kolumnƒô dystansu oraz kolumnƒô wieku.
            <br><br>
            Modelowania wykonano dwa razy, za pierwszym razem bez uproszczonego dystansu i bez uzupe≈Çnionych ≈õrednimi ocenami us≈Çug wed≈Çug p≈Çci i bez uproszczonego dystansu.
            W poprawionej wersji danych do o modelowania odrzucono kolumny poszczeg√≥lnych pokole≈Ñ na rzecz kolumny utworzonej poprzez ordinal-encoding z warto≈õciami od 1 do 5, reprezentujƒÖcymi ka≈ºde pokolenie.
            Dziƒôki temu mo≈ºna by≈Ço por√≥wnaƒá efekty poprawienia zestawu danych. 
            We wszystkich modelach test_size w Train-Test-Split ustawiono na 0.3 co oznacza, ≈ºe 70% danych zosta≈Ço przeznaczone na wytrenowanie modelu, 
            a 30% na sprawdzenie. 
            <br><br>
            Do ewaluacji modeli wykorzystano raport klasyfikacyjny i <a href="https://pl.wikipedia.org/wiki/Tablica_pomy%C5%82ek">tablicƒô pomy≈Çek</a> z biblioteki sklearn.metrics. 
            Raport klasyfikacyjny opiera siƒô na nastƒôpujƒÖcych miarach: <br>
            <li class="tablica-pomylek">True positive - prawdziwie pozytywna</li>
            <li class="tablica-pomylek">True negative - prawdziwie negatywna</li>
            <li class="tablica-pomylek">True positive - fa≈Çszywie pozytywna</li>
            <li class="tablica-pomylek">True positive - fa≈Çszywie negatywna</li>

            <li class="tablica-pomylek">Accuracy - dok≈Çadno≈õƒá, 
              \(\frac{correct\text{ }predictions}{all\text{ }predictions}\)
               - dobrze siƒô sprawdza przy wyr√≥wnanej proporcji badanego atrybutu</li>
               
            <li class="tablica-pomylek">Recall - czu≈Ço≈õƒá, 
              \(\frac{true\text{ }positives}{true\text{ }positives + false\text{ }negatives}\)
               - odsetek prawdziwych pozytyw√≥w</li>

            <li class="tablica-pomylek">Precision - precyzja, 
              \(\frac{true\text{ }positives}{true\text{ }positives + false\text{ }positves}\)
               - brane pod uwagƒô tylko pozytywy, ile z nich jest prawdziwych</li>

            <li class="tablica-pomylek">F1-Score - 
              \(2*\frac{precision \text{ } * \text{ } recall}{precision \text{ } + \text{ } recall}\)
               - kombinacja (≈õrednia harmoniczna) czu≈Ço≈õci i precyzji, 
               eliminuje znaczne odchylenia i znajduje zastosowanie w r√≥wnie≈º zestawach danych z r√≥≈ºnƒÖ dystrybucjƒÖ badanego atrybutu</li>

              <br>
            <div class="center-h5s">
              <h5>Surowe dane, brak lojalno≈õci klienta</h5>
            </div>

            <div style="display: flex; justify-content: center; ">
              <div class="table-responsive table-bordered" style="width: 100%; max-width: 450px; margin: auto; object-fit: contain; padding: 10px;">
                <table class="table" style="padding: 10px; margin: 10px;">
                  <tr>
                      <td> </td>
                      <td>precision</td>
                      <td>recall</td>
                      <td>f1-score</td>
                      <td>amount</td>
                  </tr>
                  <tr>
                      <td>0</td>
                      <td>0,91</td>
                      <td>0,95</td>
                      <td>0,93</td>
                      <td>31932</td>
                  </tr>
                  <tr>
                      <td>1</td>
                      <td>0,70</td>
                      <td>0,56</td>
                      <td>0,62</td>
                      <td>7032</td>
                  </tr>
                  <tr>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                      <td></td>
                  </tr>
                  <tr>
                      <td>accuracy</td>
                      <td></td>
                      <td></td>
                      <td>0,88</td>
                      <td>38964</td>
                  </tr>
                  <tr>
                      <td>macro avg</td>
                      <td>0,80</td>
                      <td>0,75</td>
                      <td>0,78</td>
                      <td>38964</td>
                  </tr>
                  <tr>
                      <td>weighted avg</td>
                      <td>0,87</td>
                      <td>0,88</td>
                      <td>0,87</td>
                      <td>38964</td>
                  </tr>
              </table>
              </div>
              <div class="table-responsive table-bordered" style="width: 100%; max-width: 350px; margin: auto; object-fit: contain; padding: 10px;">
                <table class="table" style="padding: 10px; margin: 10px;">
                  <tr>
                      <td></td>
                      <td>Predicted 0</td>
                      <td>Predicted 1</td>
                  </tr>
                  <tr>
                      <td>Actual 0</td>
                      <td>30223</td>
                      <td>1709</td>
                  </tr>
                  <tr>
                      <td>Actual 1</td>
                      <td>3074</td>
                      <td>3958</td>
                  </tr>
              </table>
              </div>
            </div>

            <br><br>

            <div class="center-h5s">
              <h5>Surowe dane, satysfakcja klienta</h5>
            </div>


            <div style="display: flex; justify-content: center; ">
              <div class="table-responsive table-bordered" style="width: 100%; max-width: 450px; margin: auto; object-fit: contain; padding: 10px;">
                <table class="table" style="padding: 10px; margin: 10px;">
                  <tr>
                    <td>#</td>
                    <td>precision</td>
                    <td>recall</td>
                    <td>f1-score</td>
                    <td>amount</td>
                </tr>
                <tr>
                    <td>0</td>
                    <td>0,80</td>
                    <td>0,78</td>
                    <td>0,79</td>
                    <td>17598</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>0,82</td>
                    <td>0,84</td>
                    <td>0,83</td>
                    <td>7032</td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>accuracy</td>
                    <td></td>
                    <td></td>
                    <td>0,81</td>
                    <td>38964</td>
                </tr>
                <tr>
                    <td>macro avg</td>
                    <td>0,81</td>
                    <td>0,81</td>
                    <td>0,81</td>
                    <td>38964</td>
                </tr>
                <tr>
                    <td>weighted avg</td>
                    <td>0,81</td>
                    <td>0,81</td>
                    <td>0,81</td>
                    <td>38964</td>
                </tr>
            </table>
              </div>
              <div class="table-responsive table-bordered" style="width: 100%; max-width: 350px; margin: auto; object-fit: contain; padding: 10px;">
                <table class="table" style="padding: 10px; margin: 10px;">
                  <tr>
                    <td></td>
                    <td>Predicted 0</td>
                    <td>Predicted 1</td>
                </tr>
                <tr>
                    <td>Actual  0</td>
                    <td>13711</td>
                    <td>3887</td>
                </tr>
                <tr>
                    <td>Actual 1</td>
                    <td>3327</td>
                    <td>18039</td>
                </tr>
            </table>
              </div>
            </div>
            
            Jak widaƒá, model przewidujƒÖcy lojalno≈õƒá klienta mia≈Ç do≈õƒá du≈ºy problem z przewidywaniem faktycznie nielojalnych klient√≥w. 
            Najprawdopodobniej wynika to z dysproporcji miƒôdzy ilo≈õciƒÖ lojalnych a nielojalnych klient√≥w (ok. 16%).
            Proporcja usatsfakcjonowanych do nieusatysfakcjonowanych jest bardziej wyr√≥wnana (ok. 54%).

            <br><br>

            <div class="center-h5s">
              <h5>Poprawione dane, brak lojalno≈õci klienta</h5>
            </div>

            <div style="display: flex; justify-content: center; ">
              <div class="table-responsive table-bordered" style="width: 100%; max-width: 450px; margin: auto; object-fit: contain; padding: 10px;">
                <table class="table" style="padding: 10px; margin: 10px;">
                  <tr>
                    <td></td>
                    <td>precision</td>
                    <td>recall</td>
                    <td>f1-score</td>
                    <td>support</td>
                </tr>
                <tr>
                    <td>0</td>
                    <td>0,92</td>
                    <td>0,94</td>
                    <td>0,93</td>
                    <td>31932</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>0,71</td>
                    <td>0,62</td>
                    <td>0,66</td>
                    <td>7032</td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>accuracy</td>
                    <td></td>
                    <td></td>
                    <td>0,88</td>
                    <td>38964</td>
                </tr>
                <tr>
                    <td>macro avg</td>
                    <td>0,81</td>
                    <td>0,78</td>
                    <td>0,79</td>
                    <td>38964</td>
                </tr>
                <tr>
                    <td>weighted avg</td>
                    <td>0,88</td>
                    <td>0,88</td>
                    <td>0,88</td>
                    <td>38964</td>
                </tr>
            </table>
              </div>
              <div class="table-responsive table-bordered" style="width: 100%; max-width: 350px; margin: auto; object-fit: contain; padding: 10px;">
                <table class="table" style="padding: 10px; margin: 10px;">
                  <tr>
                    <td></td>
                    <td>Przewidziane 0</td>
                    <td>Przewidziane 1</td>
                </tr>
                <tr>
                    <td>Prawdziwe 0</td>
                    <td>30150</td>
                    <td>1782</td>
                </tr>
                <tr>
                    <td>Prawdziwe 1</td>
                    <td>2706</td>
                    <td>4326</td>
                </tr>
            </table>
              </div>
            </div>

            <br><br>

            <div class="center-h5s">
              <h5>Poprawione dane, satysfakcja klienta</h5>
            </div>


            <div style="display: flex; justify-content: center; ">
              <div class="table-responsive table-bordered" style="width: 100%; max-width: 450px; margin: auto; object-fit: contain; padding: 10px;">
                <table class="table" style="padding: 10px; margin: 10px;">
                  <tr>
                    <td></td>
                    <td>precision</td>
                    <td>recall</td>
                    <td>f1-score</td>
                    <td>support</td>
                </tr>
                <tr>
                    <td>0</td>
                    <td>0,84</td>
                    <td>0,82</td>
                    <td>0,83</td>
                    <td>17598</td>
                </tr>
                <tr>
                    <td>1</td>
                    <td>0,86</td>
                    <td>0,88</td>
                    <td>0,87</td>
                    <td>21366</td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                    <td></td>
                </tr>
                <tr>
                    <td>accuracy</td>
                    <td></td>
                    <td></td>
                    <td>0,85</td>
                    <td>38964</td>
                </tr>
                <tr>
                    <td>macro avg</td>
                    <td>0,85</td>
                    <td>0,85</td>
                    <td>0,85</td>
                    <td>38964</td>
                </tr>
                <tr>
                    <td>weighted avg</td>
                    <td>0,85</td>
                    <td>0,85</td>
                    <td>0,85</td>
                    <td>38964</td>
                </tr>
            </table>
              </div>
              <div class="table-responsive table-bordered" style="width: 100%; max-width: 350px; margin: auto; object-fit: contain; padding: 10px;">
                <table class="table" style="padding: 10px; margin: 10px;">
                  <tr>
                    <td></td>
                    <td>Predicted 0</td>
                    <td>Predicted 1</td>
                </tr>
                <tr>
                    <td>Actual  0</td>
                    <td>14474</td>
                    <td>3124</td>
                </tr>
                <tr>
                    <td>Actual 1</td>
                    <td>2660</td>
                    <td>18706</td>
                </tr>
            </table>
              </div>
            </div>



            <div style="height: 5px;"></div>
            Poprawienie danych pozytywnie wp≈Çynƒô≈Ço na wiƒôkszo≈õƒá miar - jedyne miejsce w kt√≥rym model siƒô nieznacznie pogorszy≈Ç to recall dla lojalno≈õci.
            PatrzƒÖc na F-1 Score przewidywanie lojalno≈õci poprawi≈Ço siƒô, jednak problem z rozpoznawaniem nielojalnych klient√≥w pozosta≈Ç.
            Celno≈õƒá poprawi≈Ça siƒô o 295 (zmiana mniejsza ni≈º 1%) przypadk√≥w poprawnie rozpoznanych w przypadku lojalno≈õci i o  1 430 przypadk√≥w w przypadku satysfakcji (zmiana 4%).
            <div style="height: 5px;"></div>

            <br><br>
            W przypadku gdy chcieliby≈õmy przewidzieƒá pojedynczy przyk≈Çad, mo≈ºna sprawdziƒá pewno≈õƒá (prawdopodobie≈Ñstwo) przynale≈ºo≈õci do danej klasy przy pomocy poni≈ºszego kodu:

            <div style="display: flex; justify-content: center; padding: 10px; margin: 10px;">
              <pre><code>
sample = Xl_test.sample(n=1)
pred = logmodel.predict(sample)
log_probs = logmodel.predict_log_proba(sample)[:,1]
probs = np.exp(log_probs)
print(f'Wynik: {pred}\n 
        Prawdopodobie≈Ñstwo: {probs}\n 
        Logarytm prawdopodobie≈Ñstwa: {log_probs}')

# out:
Wynik: [0]
Prawdopodobie≈Ñstwo: [0.05414234] 
Logarytm prawdopodobie≈Ñstwa: [-2.91613885]
                            </code></pre>
                            <pre><code>
            


            </code></pre>
          </div>
          Czyli w tym przypadku do≈õƒá pewna przynale≈ºno≈õƒá do lojalnych klient√≥w - prawdopodobie≈Ñstwo bardzo bliskie 0.
          <br><br>
            <h4 id="wnioski-header">7. Wnioski</h4>
            <h6>
              Na podstawie wynik√≥w z tabeli oraz interpretacji wykres√≥w i b≈Çƒôd√≥w wyciƒÖgniƒôto nastƒôpujƒÖce wnioski:
            </h6>
            <li>Modele okaza≈Çy siƒô do≈õƒá celne, z wyjƒÖtkiem przewidywania nielojalnych klient√≥w</li>
            <li>KNiemal wszystkie us≈Çugi sƒÖ lepiej oceniane przez kobiety ni≈º mƒô≈ºczy≈∫n</li>
            <li>Dana linia lotnicza powinna wymieniƒá siedzenia w swoich samolotach</li>
            <li>PieniƒÖdze nie kupiƒÖ lepszych czas√≥w odlot√≥w/przylot√≥w, chyba ≈ºe posiadamy prywatny odrzutowiec</li>
            <li>Jednym z najisotniejszych problem√≥w jest jako≈õƒá rozrywki na pok≈Çadzie - najlepiej nie polegaƒá na jako≈õci film√≥w dostƒôpnych podczas lotu</li>
          
            <br>
            <h6>Sugestie jak ulepszyƒá modele:
            </h6>
            <li>Sprawdziƒá czy uzupe≈Çnie brakujƒÖcych ocen us≈Çug wg innych kryteri√≥w np. ≈õrednia dla danej us≈Çugi dla danego pokolenia przynios≈Çaby lepszy efekt, 
              lub spr√≥bowanie uzupe≈Çnienia danych ≈õrednimi warto≈õciami dla dw√≥ch kryteri√≥w np. i p≈Çeƒá i pokolenie.
            </li>
            <li>
              Zastosowaƒá GridSearch aby znale≈∫ƒá najlepszy pr√≥g odciƒôcia, inny ni≈º 0,5.
            </li>






          </div>

        </div>
      </span>
        <div class="col-md-3"> <!-- SIDEBAR -->
          <div class="sticky">
            <p>Nawigacja:</p>
            <a href="#wstep-header">1. Wstƒôp</a> <br>
            <a href="#analiza_zestawu_danych-header">2. Analiza zestawu danych</a> <br>
            <a href="#wizualizacja-header">3. Wizualizacja danych</a> <br>
            <a href="#uwagi-header" style="margin-left:15px">Uwagi dotyczƒÖce korelacji</a> <br>
            <a href="#modelowanie-header">6. Modelowanie</a> <br>
            <a href="#wnioski-header">7. Wnioski</a> <br>
          </div>
        </div>
    </div>
      


    <div id="footer", class="bottom", style="font-size:0.77em;">      
          <p style="margin:5px;">&copy; <script>document.write(new Date().getFullYear());</script> Konrad Jarominiak</p>
          <p>Wykorzystano:
            <a href="https://getbootstrap.com/" class="footer-link">Bootsrap 5</a>,
            <a href="https://highlightjs.org/" class="footer-link">highlight.js</a>,
            <a href="https://www.mathjax.org/" class="footer-link">MathJax</a> </p>
      
        </div>

    <script>hljs.highlightAll();</script>
  </body>
</html>